<?xml version="1.0" ?>
<!DOCTYPE PISI SYSTEM "https://solus-project.com/standard/pisi-spec.dtd">
<PISI>
    <Source>
        <Name>gcc</Name>
        <Homepage>http://gcc.gnu.org/</Homepage>
        <Packager>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Packager>
        <Summary>GNU Compiler Collection</Summary>
        <Description>The GNU Compiler Collection includes front ends for C, C++, Objective-C, Fortran, Java, Ada, and Go, as well as libraries for these languages (libstdc++, libgcj,...). GCC was originally written as the compiler for the GNU operating system. The GNU system was developed to be 100% free software, free in the sense that it respects the user's freedom.</Description>
        <License>GPL-3.0</License>

        <Archive sha1sum="b22ff1effc370c55e389438561f44c88f7cd047d" type="targz">https://ftp.gnu.org/gnu/gcc/gcc-6.4.0/gcc-6.4.0.tar.gz</Archive>

        <Patches>
            <Patch level="1">0001-Prebuild-changes.patch</Patch>
            <Patch level="1">0001-Use-usr-lib-64-32-x32-for-linker-locations-on-Solus-.patch</Patch>

            
            <Patch level="1">optimize-at-least-some.patch</Patch>
            <Patch level="1">optimize.patch</Patch>
        </Patches>

        <BuildDependencies>
            <Dependency>libstdc++-32bit</Dependency>
            <Dependency>glibc-32bit-devel</Dependency>
            <Dependency>libgcc-32bit</Dependency>
            <Dependency>isl-32bit-devel</Dependency>
            <Dependency>isl-devel</Dependency>
        </BuildDependencies>
    </Source>

    <Package>
        <Name>gcc</Name>
        <Files>
            <Path fileType="executable">/lib/cpp</Path>
            <Path fileType="executable">/usr/bin/cc</Path>
            <Path fileType="executable">/usr/bin/gcc*</Path>
            
            <Path fileType="executable">/usr/bin/gcov-tool*</Path>
            <Path fileType="executable">/usr/bin/*-gcc*</Path>
            <Path fileType="executable">/usr/bin/gcov</Path>
            <Path fileType="header">/usr/lib64/gcc/</Path>
            <Path fileType="library">/usr/lib64/bfd-plugins/</Path>
            <Path fileType="info">/usr/share/info</Path>
            <Path fileType="data">/usr/share/gcc-*</Path>
            <Path fileType="localedata">/usr/share/locale/*/LC_MESSAGES/gcc.mo</Path>
            <Path fileType="man">/usr/share/man/*/gcc*</Path>
            <Path fileType="man">/usr/share/man/*/gcov*</Path>
            <Path fileType="man">/usr/share/man/man7</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>mpfr</Dependency>
            <Dependency>mpc</Dependency>
        </RuntimeDependencies>
    </Package>

    <Package>
        <Name>g++</Name>
        <Files>
            <Path fileType="executable">/usr/bin/c++</Path>
            <Path fileType="executable">/usr/bin/cpp</Path>
            <Path fileType="executable">/usr/bin/g++*</Path>
            <Path fileType="executable">/usr/bin/*-g++*</Path>
            <Path fileType="executable">/usr/bin/*-c++*</Path>
            <Path fileType="header">/usr/include/c++</Path>
            <Path fileType="man">/usr/share/man/*/cpp*</Path>
            <Path fileType="man">/usr/share/man/*/g++*</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>gcc</Dependency>
        </RuntimeDependencies>
    </Package>

    <Package>
        <Name>libgcc</Name>
        <Files>
            <Path fileType="library">/usr/lib64/libgcc*</Path>
            <Path fileType="library">/usr/lib64/libcc1*</Path>
            <Path fileType="library">/usr/lib64/libasan*</Path>
            <Path fileType="library">/usr/lib64/libtsan*</Path>
            <Path fileType="library">/usr/lib64/libatomic*</Path>
            <Path fileType="library">/usr/lib64/libitm*</Path>
            <Path fileType="library">/usr/lib64/libquadmath*</Path>
            <Path fileType="library">/usr/lib64/libssp*</Path>
            <Path fileType="library">/usr/lib64/libmudflap*</Path>
            <Path fileType="library">/usr/lib64/libsanit*</Path>
            <Path fileType="library">/usr/lib64/libvtv*</Path>
            <Path fileType="library">/usr/lib64/liblsan*</Path>
            <Path fileType="library">/usr/lib64/libubsan*</Path>
            <Path fileType="library">/usr/lib64/libcilkrts*</Path>
            <Path fileType="library">/usr/lib64/libmpx*</Path>
            <Path fileType="library">/usr/lib64/crt*.o</Path>
        </Files>
        <PartOf>system.base</PartOf>
    </Package>

    <Package>
        <Name>libgcc-32bit</Name>
        <Files>
            <Path fileType="library">/usr/lib32/libgcc*</Path>
            <Path fileType="library">/usr/lib32/libasan*</Path>
            <Path fileType="library">/usr/lib32/libtsan*</Path>
            <Path fileType="library">/usr/lib32/libatomic*</Path>
            <Path fileType="library">/usr/lib32/libitm*</Path>
            <Path fileType="library">/usr/lib32/libquadmath*</Path>
            <Path fileType="library">/usr/lib32/libssp*</Path>
            <Path fileType="library">/usr/lib32/libmudflap*</Path>
            <Path fileType="library">/usr/lib32/libsanit*</Path>
            <Path fileType="library">/usr/lib32/libvtv*</Path>
            <Path fileType="library">/usr/lib32/liblsan*</Path>
            <Path fileType="library">/usr/lib32/libubsan*</Path>
            <Path fileType="library">/usr/lib32/libcilkrts*</Path>
            <Path fileType="library">/usr/lib32/libmpx*</Path>
            <Path fileType="library">/usr/lib32/crt*.o</Path>
        </Files>
        <PartOf>emul32</PartOf>
    </Package>

    <Package>
        <Name>libstdc++</Name>
        <Files>
            <Path fileType="library">/usr/lib64/lib*++*</Path>
            <Path fileType="localedata">/usr/share/locale/*/LC_MESSAGES/cpplib.mo</Path>
            <Path fileType="localedata">/usr/share/locale/*/LC_MESSAGES/libstdc++.mo</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>libgcc</Dependency>
        </RuntimeDependencies>
        <PartOf>system.base</PartOf>
    </Package>

    <Package>
        <Name>libstdc++-32bit</Name>
        <Files>
            <Path fileType="library">/usr/lib32/lib*++*</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>libstdc++</Dependency>
            <Dependency>libgcc-32bit</Dependency>
        </RuntimeDependencies>
        <PartOf>emul32</PartOf>
    </Package>

    <Package>
        <Name>libgomp</Name>
        <Files>
            <Path fileType="library">/usr/lib64/libgomp*</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>libgcc</Dependency>
        </RuntimeDependencies>
        <PartOf>system.base</PartOf>
    </Package>

    <Package>
        <Name>libgomp-32bit</Name>
        <Files>
            <Path fileType="library">/usr/lib32/libgomp*</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>libgcc-32bit</Dependency>
        </RuntimeDependencies>
        <PartOf>emul32</PartOf>
    </Package>

    <Package>
        <Name>gfortran</Name>
        <Files>
            <Path fileType="executable">/usr/bin/*fortran*</Path>
            <Path fileType="library">/usr/lib64/*fortran*</Path>
            <Path fileType="man">/usr/share/man/*/*fortran*</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>gcc</Dependency>
        </RuntimeDependencies>
    </Package>

    <Package>
        <Name>gfortran-32bit</Name>
        <Files>
            <Path fileType="library">/usr/lib32/*fortran*</Path>
        </Files>
        <RuntimeDependencies>
            <Dependency>gfortran</Dependency>
        </RuntimeDependencies>
        <PartOf>emul32</PartOf>
    </Package>

    <History>
        <Update release="30">
            <Date>11-08-2017</Date>
            <Version>6.4.0</Version>
            <Comment>Rebootstrap for T4978</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="29">
            <Date>07-20-2017</Date>
            <Version>6.4.0</Version>
            <Comment>Downgrade to 6.4.0</Comment>
            <Name>Peter O'Connor</Name>
            <Email>peter@solus-project.com</Email>
        </Update>

        <Update release="28">
            <Date>06-01-2017</Date>
            <Version>7.1.0</Version>
            <Comment>Disable gcov-dump due to bricked dbginfo</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="27">
            <Date>05-02-2017</Date>
            <Version>7.1.0</Version>
            <Comment>Update to 7.1.0</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="26">
            <Date>04-27-2017</Date>
            <Version>6.3.0</Version>
            <Comment>Restore sane flags in build</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="25">
            <Date>04-12-2017</Date>
            <Version>6.3.0</Version>
            <Comment>Enforce default flags</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="24">
            <Date>04-12-2017</Date>
            <Version>6.3.0</Version>
            <Comment>Ensure requested optimization level is respected</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="23">
            <Date>02-24-2017</Date>
            <Version>6.3.0</Version>
            <Comment>Enable ISL for Graphite Loop optimisations</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="22">
            <Date>02-22-2017</Date>
            <Version>6.3.0</Version>
            <Comment>Enable gold and proper LTO plugin support</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="21">
            <Date>01-22-2017</Date>
            <Version>6.3.0</Version>
            <Comment>Enable profiledbootstrap</Comment>
            <Name>Peter O'Connor</Name>
            <Email>peter@solus-project.com</Email>
        </Update>

        <Update release="20">
            <Date>12-23-2016</Date>
            <Version>6.3.0</Version>
            <Comment>Package bump</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="19">
            <Date>09-08-2016</Date>
            <Version>6.2.0</Version>
            <Comment>Update to 6.2.0 to fix libasan</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="18">
            <Date>07-24-2016</Date>
            <Version>6.1.0</Version>
            <Comment>Update to 6.1.0</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="17">
            <Date>06-23-2016</Date>
            <Version>5.3.0</Version>
            <Comment>Fix CFLAGS_FOR_TARGET, use -O3, fix -32bit links</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="16">
            <Date>03-06-2016</Date>
            <Version>5.3.0</Version>
            <Comment>Update to 5.3.0</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="15">
            <Date>12-29-2015</Date>
            <Version>5.2.0</Version>
            <Comment>Package bump</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="14">
            <Date>12-13-2015</Date>
            <Version>5.2.0</Version>
            <Comment>Enable multilib</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="13">
            <Date>08-21-2015</Date>
            <Version>5.2.0</Version>
            <Comment>Update to 5.2.0</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="12">
            <Date>07-25-2015</Date>
            <Version>4.9.2</Version>
            <Comment>Package bump</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="11">
            <Date>07-25-2015</Date>
            <Version>4.9.2</Version>
            <Comment>Package bump</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="10">
            <Date>07-16-2015</Date>
            <Version>4.9.2</Version>
            <Comment>Package bump</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="9">
            <Date>04-20-2015</Date>
            <Version>4.9.2</Version>
            <Comment>Disable gold</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="8">
            <Date>04-17-2015</Date>
            <Version>4.9.2</Version>
            <Comment>Fix brand string</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solus-project.com</Email>
        </Update>

        <Update release="7">
            <Date>03-03-2015</Date>
            <Version>4.9.2</Version>
            <Comment>Fix libgcc symlink</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@evolve-os.com</Email>
        </Update>

        <Update release="6">
            <Date>02-02-2015</Date>
            <Version>4.9.2</Version>
            <Comment>Provide files for clang</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@evolve-os.com</Email>
        </Update>

        <Update release="5">
            <Date>02-14-2014</Date>
            <Version>4.9.2</Version>
            <Comment>Pre-bootstrap update</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@evolve-os.com</Email>
        </Update>

        <Update release="4">
            <Date>09-20-2014</Date>
            <Version>4.8.1</Version>
            <Comment>Include 32-bit support, enable build ID note</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@evolve-os.com</Email>
        </Update>

        <Update release="3">
            <Date>03-22-2014</Date>
            <Version>4.8.1</Version>
            <Comment>Update to 4.8.1 for toolchain</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey.doherty@gmail.com</Email>
        </Update>

        <Update release="2">
            <Date>04-03-2013</Date>
            <Version>4.7.2</Version>
            <Comment>Revert the multiarch patches, we'll do our own</Comment>
            <Name>Ikey Doherty</Name>
            <Email>ikey@solusos.com</Email>
        </Update>

        <Update release="1">
            <Date>03-25-2013</Date>
            <Version>4.7.2</Version>
            <Comment>Add gcc to repositories</Comment>
            <Name>Evolve OS Packaging</Name>
            <Email>packaging@evolve-os.com</Email>
        </Update>
    </History>

</PISI>
